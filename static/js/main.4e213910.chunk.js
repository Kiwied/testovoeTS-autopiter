(this["webpackJsonptestovoe-ts-autopiter"]=this["webpackJsonptestovoe-ts-autopiter"]||[]).push([[0],{28:function(e,t,s){},29:function(e,t,s){},30:function(e,t,s){},31:function(e,t,s){},36:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),c=s.n(n),l=s(20),r=s.n(l),i=s(9),u=(s(28),s(7)),d=s(2);s(29),s(30);function o(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("a",{href:"https://autopiter.ru/",className:"header__logo",target:"_blank",rel:"noreferrer"})})}s(31);var g=function(e){var t=e.setResult,s=e.setSuggestions,n=e.savedResults,c=Object(d.f)();return Object(a.jsxs)("nav",{className:"navigation",children:[Object(a.jsx)(i.b,{exact:!0,to:"/",className:"navigation__link",activeClassName:"navigation__link navigation__link_active",onClick:function(){"/"!==c.pathname&&(t({}),s([]))},children:"\u041d\u043e\u0432\u0430\u044f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(a.jsxs)(i.b,{to:"/saved",className:"navigation__link",activeClassName:"navigation__link navigation__link_active",children:["\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 (",n.length,")"]})]})},j=s(22),m=s.n(j),_=(s(36),s(37),function(e){var t=e.data,s=e.setResult,n=e.setIsInputFocused;return Object(a.jsxs)("div",{className:"suggestion",onClick:function(){s(t),n(!1)},children:[Object(a.jsx)("h3",{className:"suggestion__name",children:t.value}),Object(a.jsxs)("p",{className:"suggestion__info",children:[t.data.inn," ",t.data.address.data.region_with_type]})]})}),p=function(e){var t=e.fetchSuggestions,s=e.suggestions,n=e.setResult,l=e.isInputFocused,r=e.setIsInputFocused,i=e.suggestionIndex,u=e.setSuggestionIndex,d=c.a.useRef(null),o=m()((function(){return t(d.current.value)}),200);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:"orgs__search",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u0418\u041d\u041d \u0438\u043b\u0438 \u0430\u0434\u0440\u0435\u0441 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",type:"text",ref:d,onChange:o,maxLength:300,autoComplete:"off",id:"input",onKeyDown:function(e){if(r(!0),"ArrowDown"===e.key&&(e.preventDefault(),s.length>0&&l&&i<4)){var t=i+1;t>0?(document.getElementsByClassName("suggestion")[t-1].classList.toggle("suggestion_hover"),document.getElementsByClassName("suggestion")[t].classList.toggle("suggestion_hover"),u(t)):(document.getElementsByClassName("suggestion")[t].classList.toggle("suggestion_hover"),u(t))}if("ArrowUp"===e.key&&(e.preventDefault(),s.length>0&&l&&i>0)){var a=i-1;a<4?(document.getElementsByClassName("suggestion")[a+1].classList.toggle("suggestion_hover"),document.getElementsByClassName("suggestion")[a].classList.toggle("suggestion_hover"),u(a)):(document.getElementsByClassName("suggestion")[a].classList.toggle("suggestion_hover"),u(a))}"Enter"===e.key&&(e.preventDefault(),i>=0&&i<=4&&(n(s[i]),r(!1),u(-1))),"Escape"===e.key&&(e.preventDefault(),r(!1),u(-1))}}),s.length>0&&l&&Object(a.jsx)("div",{className:"orgs__suggestions",children:s.slice(0,5).map((function(e,t){return Object(a.jsx)(_,{data:e,setResult:n,setIsInputFocused:r},t)}))})]})},v=s.p+"static/media/plus_sign.d5763053.svg",b=s(17),h=(s(38),s.p+"static/media/ok-sign.e7e20d18.svg"),O=function(e){var t=e.result,s=e.setSavedResults,n=e.savedResults,l=c.a.useState(!1),r=Object(u.a)(l,2),i=r[0],d=r[1];return c.a.useEffect((function(){d(!1),n.map((function(e){return e.data.inn===t.data.inn&&d(!0)}))}),[t]),Object(a.jsxs)("div",{className:"orgs__result",children:[Object(a.jsx)("h2",{className:"result__name",children:t.value}),Object(a.jsxs)("div",{className:"result__container",children:[Object(a.jsxs)("div",{className:"result__data-container",children:[Object(a.jsxs)("div",{className:"result__data",children:[Object(a.jsx)("h3",{className:"result__data-title",children:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441"}),Object(a.jsx)("p",{className:"result__data-value",children:t.data.address.unrestricted_value})]}),Object(a.jsxs)("div",{className:"result__data",children:[Object(a.jsx)("h3",{className:"result__data-title",children:"INDIVIDUAL"!==t.data.type?t.data.management.post.charAt(0)+t.data.management.post.slice(1).toLowerCase():t.data.opf.full}),Object(a.jsx)("p",{className:"result__data-value",children:"INDIVIDUAL"!==t.data.type?t.data.management.name:t.data.name.full})]}),i?Object(a.jsxs)("button",{type:"button",className:"result__save-btn result__save-btn_saved",children:[Object(a.jsx)("img",{src:h,alt:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"})," \u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"]}):Object(a.jsx)("button",{type:"button",className:"result__save-btn",onClick:function(){s([t].concat(Object(b.a)(n))),localStorage.removeItem("saved"),localStorage.setItem("saved",JSON.stringify([t].concat(Object(b.a)(n)))),d(!0)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(a.jsxs)("div",{className:"result__numbers",children:[Object(a.jsxs)("p",{className:"result__number",children:[Object(a.jsx)("span",{className:"result__number result__number_span",children:"\u0418\u041d\u041d"}),t.data.inn]}),t.data.kpp&&Object(a.jsxs)("p",{className:"result__number",children:[Object(a.jsx)("span",{className:"result__number result__number_span",children:"\u041a\u041f\u041f"}),t.data.kpp]}),Object(a.jsxs)("p",{className:"result__number",children:[Object(a.jsx)("span",{className:"result__number result__number_span",children:"\u041e\u0413\u0420\u041d"}),t.data.ogrn]})]})]})]})},x=(s(39),function(e){var t=e.fetchSuggestions,s=e.suggestions,n=e.setResult,c=e.setIsInputFocused,l=e.isInputFocused,r=e.result,i=e.setSavedResults,u=e.savedResults,d=e.setSuggestionIndex,o=e.suggestionIndex;return Object(a.jsxs)("div",{className:"orgs",children:[Object(a.jsx)("label",{className:"orgs__title",htmlFor:"input",children:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0438\u043b\u0438 \u0418\u041f"}),Object(a.jsx)(p,{fetchSuggestions:t,suggestions:s,setResult:n,setIsInputFocused:c,isInputFocused:l,suggestionIndex:o,setSuggestionIndex:d}),function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(r)?Object(a.jsxs)("div",{className:"orgs__no-results",children:[Object(a.jsx)("img",{src:v,alt:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",className:"orgs__add-org-icon"}),Object(a.jsx)("p",{className:"orgs__add-org-text",children:"\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0435\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u0418\u041d\u041d \u0438\u043b\u0438 \u0430\u0434\u0440\u0435\u0441."})]}):Object(a.jsx)(O,{result:r,setSavedResults:i,savedResults:u})]})}),f=(s(40),s.p+"static/media/arrow-up.cd00e8cb.svg"),N=s.p+"static/media/arrow-down.464346d5.svg",I=function(e){var t=e.org,s=e.setSavedResults,n=e.savedResults,l=c.a.useState(!1),r=Object(u.a)(l,2),i=r[0],d=r[1];function o(){d(!i)}return Object(a.jsxs)("div",{className:"saved-result",children:[Object(a.jsx)("h3",{className:"saved-result__name",children:t.value}),Object(a.jsxs)("div",{className:"saved-result__data-container",children:[Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"\u0418\u041d\u041d"}),t.data.inn]}),i&&Object(a.jsxs)(a.Fragment,{children:[t.data.kpp&&Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"\u041a\u041f\u041f"}),t.data.kpp]}),Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"\u041e\u0413\u0420\u041d"}),t.data.ogrn]}),Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441"}),t.data.address.unrestricted_value]}),Object(a.jsxs)("p",{className:"saved-result__data",children:[Object(a.jsx)("span",{className:"saved-result__data_span",children:"INDIVIDUAL"!==t.data.type?t.data.management.post.charAt(0)+t.data.management.post.slice(1).toLowerCase():t.data.opf.full}),"INDIVIDUAL"!==t.data.type?t.data.management.name:t.data.name.full]})]})]}),Object(a.jsx)("button",{type:"button",className:"saved-result__delete-btn",onClick:function(){var e=n.filter((function(e){return e.data.inn!==t.data.inn}));s(e),localStorage.setItem("saved",JSON.stringify(e))}}),i?Object(a.jsxs)("button",{type:"button",className:"saved-result__details-btn",onClick:o,children:["\u0441\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438",Object(a.jsx)("img",{src:f,alt:"\u0441\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438",className:"saved-result__details-icon"})]}):Object(a.jsxs)("button",{type:"button",className:"saved-result__details-btn",onClick:o,children:["\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",Object(a.jsx)("img",{src:N,alt:"\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",className:"saved-result__details-icon"})]})]})},y=function(e){var t=e.savedResults,s=e.setSavedResults;return Object(a.jsx)("div",{className:"orgs",children:t.map((function(e,n){return Object(a.jsx)(I,{org:e,setSavedResults:s,savedResults:t},n)}))})},S=Object(d.g)((function(){var e=c.a.useState({}),t=Object(u.a)(e,2),s=t[0],n=t[1],l=c.a.useState([]),r=Object(u.a)(l,2),i=r[0],j=r[1],m=c.a.useState(!1),_=Object(u.a)(m,2),p=_[0],v=_[1],b=c.a.useState([]),h=Object(u.a)(b,2),O=h[0],f=h[1],N=c.a.useState(-1),I=Object(u.a)(N,2),S=I[0],k=I[1];c.a.useEffect((function(){var e=function(e){e.target.classList.contains("orgs__search")||e.target.classList.contains("suggestion")||e.target.parentElement.classList.contains("suggestion")?v(!0):(v(!1),k(-1))};return document.getElementById("app").addEventListener("click",e),function(){return document.getElementById("app").removeEventListener("click",e)}}),[p]),c.a.useEffect((function(){localStorage.getItem("saved")&&f(JSON.parse(localStorage.getItem("saved")||"[]"))}),[]);return Object(a.jsxs)("div",{className:"app",id:"app",children:[Object(a.jsx)(o,{}),Object(a.jsxs)("main",{className:"main",children:[Object(a.jsx)("h1",{className:"main__title",children:"\u041c\u043e\u0438 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"}),Object(a.jsxs)("section",{className:"main__container",children:[Object(a.jsx)(g,{savedResults:O,setResult:n,setSuggestions:j}),Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{exact:!0,path:"/",children:Object(a.jsx)(x,{fetchSuggestions:function(e){var t={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 2a20a4f21d4938545a386b96e095f8a2c7eb272a"},body:JSON.stringify({query:e})};fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party",t).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," ").concat(e.statusText))})).then((function(e){var t=[];e.suggestions.map((function(e){var s={value:e.value,data:{inn:e.data.inn,kpp:e.data.kpp,ogrn:e.data.ogrn,address:{data:{region_with_type:e.data.address.data.region_with_type},unrestricted_value:e.data.address.unrestricted_value},type:e.data.type,opf:{full:e.data.opf.full},name:{full:e.data.name.full},management:{}}};e.data.management&&(s.data.management.post=e.data.management.post,s.data.management.name=e.data.management.name),t.push(s)})),j(t)})).catch((function(e){return console.log(e)}))},suggestions:i,setResult:n,setIsInputFocused:v,isInputFocused:p,result:s,setSavedResults:f,savedResults:O,suggestionIndex:S,setSuggestionIndex:k})}),Object(a.jsx)(d.a,{path:"/saved",children:Object(a.jsx)(y,{savedResults:O,setSavedResults:f})})]})]})]})]})}));r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(i.a,{children:Object(a.jsx)(S,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.4e213910.chunk.js.map